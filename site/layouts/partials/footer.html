<footer class="bg-black ph3 pv4 white">

	<div class="mw7 center pt3">

		<div class="measure-narrow center mb4">

			<img src="/img/logo.svg" alt="Kaldi logo" class="db w4 center mb4 br0">
			<p class="f3 lh-title light-gray b tc mb2">{{ .Site.Data.footer.title }}</p>
			<p>{{ .Site.Data.footer.blurb }}</p>

			{{ partial "newsletter-form" . }}

		</div>

		<div class="flex-ns justify-between">

			<div>
				<h3 class="f4 b lh-title mb1 primary">Kaldi</h3>
				<ul class="mb3">
					<li><a href="/" class="link">Home</a></li>
					<li><a href="/products" class="link">Our products</a></li>
					<li><a href="/values" class="link">About</a></li>
					<li><a href="/post" class="link">Blog</a></li>
					<li><a href="/contact" class="link">Contact</a></li>
				</ul>
			</div>

			<div>
				<h3 class="f4 b lh-title mb1 primary">Find out more</h3>
				<ul class="mb3">
					<li><a href="/post/jamaica-blue/" class="link">Latest offers</a></li>
					<li><a href="/contact" class="link">Schedule an appointment</a></li>
				</ul>
			</div>

			<div>
				<h3 class="f4 b lh-title mb2 primary">Social media</h3>
				<ul class="mhn2">
					{{ partial "social-icon" (dict "link" "#" "svg" "icons-facebook" "alt" "Kaldi on Facebook") }}
					{{ partial "social-icon" (dict "link" "#" "svg" "icons-twitter" "alt" "Kaldi on Twitter") }}
					{{ partial "social-icon" (dict "link" "#" "svg" "icons-instagram" "alt" "Kaldi on Instagram") }}
					{{ partial "social-icon" (dict "link" "#" "svg" "icons-vimeo" "alt" "Kaldi on Vimeo") }}
				</ul>
			</div>

		</div>
	</div>

</footer>

<script>
// Affiliate click tracking: pushes to dataLayer for GTM and falls back to gtag if present.
// Listens for clicks on <a> that include rel="sponsored" (per our link convention).
document.addEventListener('click', function(e){
  var a = e.target.closest && e.target.closest('a[rel~="sponsored"]');
  if(!a) return;
  try{
    var affiliateId = a.getAttribute('data-affiliate') || '';
    var href = a.href || '';
    // dataLayer push for GTM
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: 'affiliate_click',
      affiliate_id: affiliateId,
      href: href,
      page_path: window.location.pathname
    });
    // Optional GA4 fallback if gtag is available
    if(window.gtag){
      gtag('event', 'affiliate_click', {
        event_category: 'affiliate',
        event_label: affiliateId || href,
        value: 1
      });
    }
  }catch(err){
    // fail silently
    console.warn('Affiliate tracking error', err);
  }
}, false);
</script>
